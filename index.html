<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Jemputan — Fit-to-page & Mobile Friendly</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      --accent:#a67c52;
      --muted:#6b7280;
      --app-maxw:420px;           /* desired app max width */
      --popup-maxw:320px;
      --frame-top-h: 0px;        /* set by JS from overlay height */
      --frame-bottom-h: 0px;     /* set by JS from overlay height */
      --bg-img: url("https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/6jgvkT17552257093998.jpg");
      --overlay-top-src: "https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/1gAdBv175522894697110.png";
      --overlay-bottom-src: "https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/T7EZA1175522895996211.png";
    }

    /* reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Poppins',sans-serif;
      color:#111;
      -webkit-font-smoothing:antialiased;
      background-image: var(--bg-img);
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: fixed;
      overflow-x:hidden; /* prevent horizontal scroll from overlays */
      padding-bottom: calc(140px + env(safe-area-inset-bottom));
    }

    /* OVERLAYS: responsive & fit-to-page
       width uses min(app max width, viewport width) so overlays never overflow
    */
    .overlay-img {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      pointer-events: none;
      z-index: 9999;
      display: block;
      width: min(var(--app-maxw), 100vw); /* IMPORTANT: fits page & mobile */
      height: auto;
      max-width: 100%;
      object-fit: contain;
      image-rendering: auto;
    }
    .overlay-top { top: 0; }
    .overlay-bottom { bottom: 0; }

    /* APP wrapper: padding derived from overlay heights (set by JS) */
    .app{
      width:100%;
      max-width:var(--app-maxw);
      margin:0 auto;
      position:relative;
      min-height:100vh;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      padding-top: calc(var(--frame-top-h) + 12px);
      padding-bottom: calc(var(--frame-bottom-h) + 140px);
      z-index:1;
      background: transparent;
    }

    section{ min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:24px 12px; }
    .content{
      width: calc(100% - 40px);
      max-width: 420px;
      margin: 0 auto 24px;
      padding: 20px;
      border-radius: 14px;
      background: rgba(255,255,255,0.96);
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
      text-align:center;
    }

    .intro-text .kecil{ font-family:'Playfair Display',serif; font-size:16px; color:#333; margin-bottom:4px; font-weight:400 }
    .intro-text .besar{ font-family:'Playfair Display',serif; font-size:34px; font-weight:700; letter-spacing:1px; line-height:1.15; color:#2b2b2b }
    .intro-text .tarikh{ font-family:'Poppins',sans-serif; font-size:14px; color:#222; margin-top:8px; font-weight:500 }

    h2{ font-size:18px; font-weight:600; color:var(--accent); margin:14px 0 8px; }
    p{ font-size:15px; color:#222; line-height:1.6; margin-bottom:8px }

    /* bottom bar & compact popups */
    .bottom-bar{ position:fixed; left:50%; transform:translateX(-50%); bottom:10px; z-index:10050; width:calc(100% - 40px); max-width:var(--app-maxw); background:rgba(0,0,0,0.75); border-radius:14px; padding:8px 12px; box-shadow:0 6px 20px rgba(0,0,0,0.12); display:flex; gap:12px; align-items:center; justify-content:space-around; padding-bottom:calc(10px + env(safe-area-inset-bottom)); }
    .bottom-bar .icon-btn{ display:flex; flex-direction:column; align-items:center; justify-content:center; color:#fff; font-size:16px; gap:4px; cursor:pointer; }
    .bottom-bar .icon-btn i{ color:#fff; font-size:18px }
    .bottom-bar .icon-btn span{ font-size:12px; color:#fff; }

    .map-popup.compact {
      position: fixed;
      left:50%;
      transform:translateX(-50%);
      bottom: calc(var(--frame-bottom-h) + 18px); /* sits above bottom overlay */
      background:#e8dcc6;
      color:#222;
      padding:10px;
      border-radius:12px;
      width:calc(100% - 40px);
      max-width:var(--popup-maxw);
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,0.12);
      z-index:10080;
    }
    .btn-inline{ display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:100%;gap:8px;font-size:14px }

    /* small screens: slightly reduce overlay height if viewport very short to avoid huge padding */
    @media (max-height:600px){
      .overlay-img { width: min(calc(var(--app-maxw) * 0.9), 100vw); }
    }

    /* ensure no horizontal overflow from overlays */
    @media (max-width:420px){
      html,body { overflow-x:hidden; }
      .overlay-img { width: 100vw; left:50%; transform:translateX(-50%); }
    }

    /* small utility */
    .bubbles{ max-height:220px; overflow-y:auto; padding-right:6px; margin-top:8px }
    .bubble{ background:#fff4e9; padding:10px;border-radius:14px;margin-bottom:8px; box-shadow:0 6px 12px rgba(0,0,0,0.05) }
  </style>
</head>
<body>

  <!-- Overlays as <img> but RESPONSIVE (width = min(appMax, viewportWidth)) -->
  <img id="overlayTop" class="overlay-img overlay-top" src="https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/1gAdBv175522894697110.png" alt="" />
  <img id="overlayBottom" class="overlay-img overlay-bottom" src="https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/T7EZA1175522895996211.png" alt="" />

  <!-- MAIN APP -->
  <div class="app" id="appRoot" aria-hidden="false">
    <section>
      <div class="intro-text">
        <div class="kecil">Assalamualaikum dan Selamat Sejahtera</div>
        <div class="besar">NUR SARAH BINTI RIZMAN<br>&amp;<br>MUHAMMAD HARRIS BIN AZMAN</div>
        <div class="tarikh">Selasa, 13 Januari 2026</div>
      </div>
    </section>

    <section>
      <div class="content">
        <p>Dato | Datin | Tuan | Puan | Encik | Cik<br>ke majlis perkahwinan anakanda kami</p>

        <h2>Butiran Majlis</h2>
        <p><strong>Tarikh:</strong> Selasa, 13 Januari 2026<br><strong>Masa:</strong> 11:00 AM - 4:30 PM<br><strong>Tempat:</strong> White House Event Space, Dungun</p>

        <h2>Gambar</h2>
        <div class="photo-slider" aria-label="Galeri Gambar">
          <div class="slides" style="display:flex;transition:transform .4s ease;">
            <div class="slide-item" style="min-width:100%;flex:0 0 100%;height:200px"><img src="https://i.postimg.cc/C5BpCwGw/Whats-App-Image-2025-11-08-at-7-40-37-PM.jpg" alt="" style="width:100%;height:100%;object-fit:cover;border-radius:12px"></div>
            <div class="slide-item" style="min-width:100%;flex:0 0 100%;height:200px"><img src="https://i.postimg.cc/RVtzNVCT/Whats-App-Image-2025-11-08-at-7-42-44-PM.jpg" alt="" style="width:100%;height:100%;object-fit:cover;border-radius:12px"></div>
          </div>
        </div>

        <h2>Ucapan</h2>
        <div class="bubbles" id="bubblesContainer" aria-live="polite"></div>

        <h2>COUNTING DAYS</h2>
        <div class="countdown" id="countdown" style="display:flex;justify-content:center;gap:8px;margin-top:8px">
          <div style="background:#f1f1f1;padding:8px 10px;border-radius:8px"><div id="days" style="font-weight:700">0</div><div style="font-size:11px;color:#6b7280">Hari</div></div>
          <div style="background:#f1f1f1;padding:8px 10px;border-radius:8px"><div id="hours" style="font-weight:700">00</div><div style="font-size:11px;color:#6b7280">Jam</div></div>
          <div style="background:#f1f1f1;padding:8px 10px;border-radius:8px"><div id="mins" style="font-weight:700">00</div><div style="font-size:11px;color:#6b7280">Minit</div></div>
          <div style="background:#f1f1f1;padding:8px 10px;border-radius:8px"><div id="secs" style="font-weight:700">00</div><div style="font-size:11px;color:#6b7280">Saat</div></div>
        </div>

        <footer style="margin-top:14px;color:#6b7280;font-size:13px">Terima kasih — Kami hargai kehadiran dan doa anda.</footer>
      </div>
    </section>
  </div>

  <!-- contact card (hidden) -->
  <div class="map-popup compact contact-card" id="contactCard" style="display:none;">
    <h4 style="margin:0 0 8px;font-family:'Playfair Display',serif">Contact</h4>
    <div style="display:flex;flex-direction:column;gap:8px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><div style="font-weight:700">Hj. Shuhaimi</div><div style="font-size:12px;color:#6b5f50">Bapa</div></div>
        <div style="display:flex;gap:8px"><a href="https://wa.me/+60199150821" target="_blank" rel="noopener noreferrer" style="background:var(--accent);color:#fff;padding:8px;border-radius:8px;text-decoration:none"><i class="fa-brands fa-whatsapp"></i></a><a href="tel:+60199150821" style="background:var(--accent);color:#fff;padding:8px;border-radius:8px;text-decoration:none"><i class="fa-solid fa-phone"></i></a></div>
      </div>
    </div>
  </div>

  <!-- bottom bar -->
  <div class="bottom-bar" role="navigation" aria-label="tindakan">
    <div class="icon-btn" id="callBtn"><i class="fa-solid fa-phone"></i><span>Hubungi</span></div>

    <div class="icon-btn" id="mapBtn">
      <i class="fa-solid fa-location-dot"></i><span>Lokasi</span>
      <div class="map-popup compact" id="mapPopup" style="display:none;">
        <h4>Lokasi</h4>
        <p>White House Event Space, Dungun</p>
        <a class="btn-inline" href="https://maps.app.goo.gl/Z2F3c86dVen1ciR29" target="_blank" rel="noopener noreferrer"><i class="fa-solid fa-map-location-dot"></i><span style="margin-left:6px">Google Maps</span></a>
      </div>
    </div>

    <div class="icon-btn" id="bottomRsvpBtn"><i class="fa-regular fa-envelope"></i><span>RSVP</span></div>
  </div>

  <!-- popup RSVP -->
  <div id="popupRsvp" class="map-popup compact" style="display:none;">
    <h4>RSVP</h4>
    <p>Pilih tindakan untuk RSVP atau hantarkan ucapan.</p>
    <a id="openExternalRsvp" class="btn-inline" href="#"><i class="fa-solid fa-clipboard-list"></i><span style="margin-left:6px">Isi RSVP</span></a>
    <a id="openUcapan" class="btn-inline" href="#"><i class="fa-solid fa-pencil"></i><span style="margin-left:6px">Hantar Ucapan</span></a>
  </div>

  <!-- inline RSVP form -->
  <div id="popupRsvpIframe" class="map-popup compact" style="display:none;">
    <h4>Isi RSVP</h4>
    <p>Sila lengkapkan borang di bawah.</p>
    <button id="closeRsvpIframe" aria-label="Tutup" style="position:absolute;top:8px;right:10px;background:transparent;border:none;font-size:18px;color:#333;cursor:pointer;z-index:10001">&times;</button>
    <form id="rsvpInlineForm" style="display:flex;flex-direction:column;gap:8px;margin-top:6px;">
      <input id="rsvp_nama" name="nama" type="text" placeholder="Nama penuh" required style="padding:8px;border-radius:8px;border:1px solid #ddd;font-size:14px" />
      <input id="rsvp_jumlah" name="jumlah" type="number" min="1" placeholder="Bilangan ahli (cth: 2)" value="1" required style="padding:8px;border-radius:8px;border:1px solid #ddd;font-size:14px" />
      <div style="display:flex;gap:8px;justify-content:center;margin-top:4px;font-size:13px">
        <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="hadir" value="Hadir" checked /> Hadir</label>
        <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="hadir" value="Tidak Hadir" /> Tidak Hadir</label>
      </div>
      <button id="rsvpSubmit" type="submit" style="background:var(--accent);color:#fff;padding:8px;border-radius:10px;border:none;font-size:14px">Hantar RSVP</button>
    </form>
    <div id="rsvpStatus" style="margin-top:8px;font-size:13px;color:#333;display:none"></div>
  </div>

  <!-- ucapan -->
  <div id="ucapanForm" class="map-popup compact" aria-label="ucapan" style="display:none;">
    <h4>Hantar Ucapan</h4>
    <p>Tulis nama dan ucapan anda untuk pengantin.</p>
    <button id="closeUcapanBtn" aria-label="Tutup" style="position:absolute;top:8px;right:10px;background:transparent;border:none;font-size:18px;color:#333;cursor:pointer;z-index:10001">&times;</button>
    <input id="ucap_name" type="text" placeholder="Nama anda" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin-bottom:8px">
    <textarea id="ucap_text" placeholder="Ucapan untuk pengantin" rows="3" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin-bottom:8px"></textarea>
    <a id="submitUcapan" class="btn-inline" href="#"><i class="fa-solid fa-paper-plane"></i><span style="margin-left:6px">Hantar</span></a>
    <div id="ucapanStatus" style="margin-top:8px;font-size:13px;color:#333;display:none"></div>
  </div>

  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none"></iframe>

<script>
(function(){
  // set CSS var helper
  function setCSSVar(name, value){ document.documentElement.style.setProperty(name, value); }

  // overlays
  const topImg = document.getElementById('overlayTop');
  const bottomImg = document.getElementById('overlayBottom');

  function updateOverlayHeights(){
    // read current rendered heights (after responsive scaling)
    try{
      const topH = topImg && topImg.getBoundingClientRect ? Math.round(topImg.getBoundingClientRect().height) : 0;
      const bottomH = bottomImg && bottomImg.getBoundingClientRect ? Math.round(bottomImg.getBoundingClientRect().height) : 0;
      setCSSVar('--frame-top-h', (topH || 0) + 'px');
      setCSSVar('--frame-bottom-h', (bottomH || 0) + 'px');
    }catch(e){
      // fallback sizes
      setCSSVar('--frame-top-h', '220px');
      setCSSVar('--frame-bottom-h', '180px');
    }
  }

  // update after images loaded & on resize/orientation change
  function attachUpdate(img){
    if(!img) return;
    if(img.complete){
      updateOverlayHeights();
    } else {
      img.addEventListener('load', updateOverlayHeights, {once:true});
      // fallback
      setTimeout(updateOverlayHeights, 600);
    }
  }
  attachUpdate(topImg);
  attachUpdate(bottomImg);
  window.addEventListener('resize', updateOverlayHeights);
  window.addEventListener('orientationchange', updateOverlayHeights);

  /* Popup + form logic (same as previous) */
  function escapeHtml(s){ if (typeof s !== 'string') return s||''; return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;'); }
  function showStatus(el, msg, ok){ if(!el) return; el.style.display='block'; el.textContent = msg; el.style.color = ok ? '#0a7a00' : '#b21b1b'; }

  const callBtn = document.getElementById('callBtn');
  const mapBtn = document.getElementById('mapBtn');
  const bottomRsvpBtn = document.getElementById('bottomRsvpBtn');
  const contactCard = document.getElementById('contactCard');
  const mapPopup = document.getElementById('mapPopup');
  const popupRsvp = document.getElementById('popupRsvp');
  const popupRsvpIframe = document.getElementById('popupRsvpIframe');
  const ucapanForm = document.getElementById('ucapanForm');

  function hideAllPopups(){ [contactCard,mapPopup,popupRsvp,popupRsvpIframe,ucapanForm].forEach(e=>{ if(e) e.style.display='none'; e && e.setAttribute && e.setAttribute('aria-hidden','true'); }); }

  if(callBtn) callBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); contactCard.style.display = (contactCard.style.display==='block')? 'none':'block'; });
  if(mapBtn) mapBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); mapPopup.style.display = (mapPopup.style.display==='block')? 'none':'block'; });
  if(bottomRsvpBtn) bottomRsvpBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); popupRsvp.style.display = (popupRsvp.style.display==='block')? 'none':'block'; });

  document.addEventListener('click', function(e){
    const popupEls = [contactCard,mapPopup,popupRsvp,popupRsvpIframe,ucapanForm];
    let inside=false;
    popupEls.forEach(p=>{ if(p && p.contains && p.contains(e.target)) inside=true; });
    const btns=[callBtn,mapBtn,bottomRsvpBtn];
    btns.forEach(b=>{ if(b && (b===e.target || b.contains(e.target))) inside=true; });
    if(!inside) hideAllPopups();
  });

  // simple slider auto
  (function(){ try{
    const container = document.querySelector('.photo-slider');
    if(!container) return;
    const slider = container.querySelector('.slides');
    const slides = slider.children;
    const total = slides.length;
    let idx = 0;
    let autoT = setInterval(()=>{ idx = (idx+1)%total; slider.style.transform = 'translateX(-'+(idx*100)+'%)'; }, 3500);
    container.addEventListener('mouseenter', ()=>clearInterval(autoT));
    container.addEventListener('mouseleave', ()=>autoT = setInterval(()=>{ idx = (idx+1)%total; slider.style.transform = 'translateX(-'+(idx*100)+'%)'; }, 3500));
  }catch(e){ console.warn(e); }})();

  // countdown (example)
  function pad(n){ return String(n).padStart(2,'0'); }
  const eventDate = new Date('2026-01-13T11:00:00+08:00');
  function updateCountdown(){
    const now = new Date();
    let diff = Math.max(0, Math.floor((eventDate - now) / 1000));
    const days = Math.floor(diff / 86400); diff %= 86400;
    const hours = Math.floor(diff / 3600); diff %= 3600;
    const mins = Math.floor(diff / 60); const secs = diff % 60;
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minsEl = document.getElementById('mins');
    const secsEl = document.getElementById('secs');
    if(daysEl) daysEl.textContent = days;
    if(hoursEl) hoursEl.textContent = pad(hours);
    if(minsEl) minsEl.textContent = pad(mins);
    if(secsEl) secsEl.textContent = pad(secs);
  }
  updateCountdown();
  setInterval(updateCountdown, 1000);

})();
</script>

</body>
</html>
